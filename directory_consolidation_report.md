# Dream.OS Directory Structure Analysis Report
*Generated by Agent-2 for Agent-3's review*

## Current Structure Analysis

### 1. Test-Related Directories (High Consolidation Priority)
Currently scattered across multiple locations:
- `tests/`
- `test_logs/`
- `test_temp/`
- `test_data/`
- `test_cache/`
- `test_voice_queue/`
- `test_backups/`
- `test_reports/`
- `test_output/`

**Recommendation**: Consolidate all test-related directories under a single `tests/` directory:
```
tests/
├── data/           # Test fixtures and data
├── logs/           # Test execution logs
├── cache/          # Test cache files
├── reports/        # Test execution reports
├── output/         # Test output files
└── backups/        # Test backup files

reports/           # CI and build artifacts
├── coverage/      # Coverage reports
└── performance/   # Performance test results
```

### 2. Logging Directories (Medium Consolidation Priority)
Currently distributed across:
- `logs/`
- `custom_logs/`
- `runtime/logs/`
- `test_logs/`

**Recommendation**: Implement a unified logging structure with centralized configuration:
```
logs/
├── system/        # System-level logs
├── agents/        # Agent-specific logs
├── runtime/       # Runtime logs (including bridge.log)
└── tests/         # Test execution logs

config/
└── log_config.yaml  # Centralized logging configuration
```

**Key Changes**:
- Move `runtime/logs/bridge.log` to `logs/runtime/bridge.log`
- Create `log_config.yaml` for centralized logging configuration
- Update all hardcoded log paths in code

### 3. Runtime Directories (Medium Consolidation Priority)
Current structure in `runtime/`:
- `bridge_inbox/`
- `logs/`
- `queue/`
- `prompts/`
- `sessions/`
- `planning/`
- `devlog/`
- `config/`
- `mailbox/`
- `agent_memory/`

**Recommendation**: Reorganize into functional groups:
```
runtime/
├── communication/
│   ├── bridge_inbox/
│   ├── mailbox/
│   └── queue/
├── agents/
│   ├── memory/
│   ├── sessions/
│   └── planning/
├── system/
│   ├── config/
│   ├── logs/
│   └── devlog/    # Kept separate for agent access
└── resources/
    └── prompts/
```

**Important Notes**:
- Keep `devlog/` under `runtime/system/` for agent accessibility
- Update Agent-4's `pending_requests.json` path
- Ensure all agent paths are updated in code

### 4. Agent-Related Directories (High Consolidation Priority)
Currently scattered:
- `agent_tools/`
- `agent-1/`
- `agent_responses/`
- `runtime/agent_memory/`

**Recommendation**: Create a unified agent structure:
```
agents/
├── tools/
│   ├── common/    # Shared helper scripts
│   └── specific/  # Agent-specific tools
├── responses/
├── memory/
└── instances/
    └── agent-1/
```

**Key Changes**:
- Move shared helpers to `agents/tools/common/`
- Update `AgentManager` to use `agents/instances/{agent_id}/inbox.json`
- Maintain backward compatibility during migration

### 5. Configuration Files (Medium Consolidation Priority)
Currently distributed:
- `config/`
- `runtime/config/`
- `system_config.yaml`
- `config.json`

**Recommendation**: Centralize all configuration:
```
config/
├── system/
│   ├── main.yaml      # Main system configuration
│   └── runtime.yaml   # Runtime-specific settings
├── agents/
│   ├── defaults.yaml  # Default agent settings
│   └── {agent_id}/    # Agent-specific configs
└── environment/
    ├── dev.yaml
    ├── test.yaml
    └── prod.yaml
```

**Important Notes**:
- Each agent can have its own config in `config/agents/{agent_id}/`
- Maintain fallback to default settings
- Update all `system_config.yaml` references to `config/system/main.yaml`

## Implementation Priorities

### Phase 1: Critical Consolidations
1. Test directory consolidation
   - Move test artifacts to `reports/`
   - Update CI/CD paths
2. Agent-related directory consolidation
   - Implement new agent structure
   - Update `AgentManager`
3. Logging system unification
   - Create `log_config.yaml`
   - Update log paths

### Phase 2: Structural Improvements
1. Runtime directory reorganization
   - Move files to new structure
   - Update agent paths
2. Configuration centralization
   - Migrate config files
   - Update references
3. Resource management consolidation
   - Organize shared resources
   - Update resource paths

### Phase 3: Cleanup and Optimization
1. Remove redundant directories
2. Update import paths
3. Update documentation
4. Archive old structure to `archive/legacy-2024-03/`

## Migration Strategy

1. **Preparation**
   - Create new directory structure
   - Update import paths
   - Prepare migration scripts
   - Create backup of current structure

2. **Execution**
   - Move files in batches
   - Update references
   - Verify functionality
   - Run integration tests

3. **Validation**
   - Run test suite
   - Check logging
   - Verify agent operations
   - Validate all paths

4. **Cleanup**
   - Remove old directories
   - Update documentation
   - Archive old structure
   - Final verification

## Next Steps

1. Review this report with Agent-3
2. Create detailed migration plan
3. Implement changes in phases
4. Monitor system stability
5. Update documentation

## Notes for Agent-3

- Please review the proposed structure
- Consider impact on existing agent operations
- Suggest any additional consolidation opportunities
- Provide feedback on migration strategy
- Identify potential risks in the proposed changes

---
*Report generated: 2024-03-19*
*Status: Awaiting Agent-3 Review* 